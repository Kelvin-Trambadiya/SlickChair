@(result: Option[String],
  queryForm: Form[(String, controllers.chair.SqlMethod.Value)],
  user: String)

@import controllers.chair._
@import helper.bootstrap3._

@main("SQL Form", Some(user)) {
  @bootstrap3.form(routes.Sql.runQuery) {
    <legend>Query</legend>
    @bootstrap3.textarea(
      queryForm("query"),
      'placeholder -> "SELECT * FROM SECURE_SOCIAL_USERS",
      '_label -> "PostgreSQL",
      'rows -> 3)
    
    @bootstrap3.inputRadioGroup(
      queryForm("method.m"), 
      SqlMethod.values.toSeq.map(f => f.toString -> f.toString), 
      '_label -> "Query Type")
          
    <div class="small-gap"></div>
    @bootstrap3.button("Run (Ctrl+Enter)")
  }

  @result.map { output =>
    <legend></legend>
    <pre>@output</pre>
  }
  <script>
  // TODO: rewrite in jquery/caffescript, pull out.
  window.onload = function () {
    document.getElementById('query').select();
    document.body.onkeydown = function (e) {
      if (e.keyCode == 13 && e.ctrlKey) {
        document.getElementById('submit').click();
        return false; }}}
  </script>
}

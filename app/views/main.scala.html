@(title: String,
  user: Option[models.Person],
  menu: List[(play.api.mvc.Call, String)],
  modal: Html = Html("")
)(content: Html)(implicit request: play.api.mvc.Request[Any])

@minified = @{ if (play.Play.isProd()) ".min" else "" }
@modalOpened = @{ !modal.toString.isEmpty }
@idSize = @{ models.newId.value.toString.size }

@import securesocial.core.providers.utils.RoutesHelper

<!DOCTYPE html>
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@title</title>
  <link rel="stylesheet" href="@routes.Assets.at("vendor/stylesheets/bootstrap.css")">
  <link rel="stylesheet" href="@routes.Assets.at("vendor/stylesheets/bootstrap-theme.css")">
  <link rel="stylesheet" href="@routes.Assets.at("stylesheets/main.css")">
  <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
  <style type="text/css">
    body {
      @* Made by http://www.domainsinfo.org/, found on http://subtlepatterns.com/. *@
      background-image: url('@routes.Assets.at("images/wavegrid.png")');
    }
  </style>
</head>
<body @if(modalOpened) { class="modal-open" }>
  <nav>
    <div class="navbar navbar-inverse navbar-static-top">
      <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="@menu.head._1" class="navbar-brand">@menu.head._2</a>
      </div>
      
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          @menu.tail.map { case (url, text) =>
            <li @if(request.uri.takeRight(idSize) equals url.toString.takeRight(idSize)) { class="active" }><a href="@url">@text</a></li>
          }
        </ul>
        
      @user match {
        case None => {
          <p class="navbar-text pull-right">
            <a href="#" class="navbar-link">Disconnected</a>
          </p>
        }
        case Some(p) => {
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">@p.email <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="@controllers.chair.routes.Sql.form">Change role to Chair</a></li>
                <li><a href="@controllers.member.routes.Reviewing.papers">Change role to PC Member</a></li>
                <li><a href="@routes.Submitting.make">Change role to Author</a></li>
                <li class="divider"></li>
                <li><a href="@RoutesHelper.logout()">Disconnect</a></li>
              </ul>
            </li>
          </ul>
        }
      }
      </div>
    </div>
    </div>
  </nav>
  
  <div class="container">
    <div class="content">
      <div class="page-header">
        <h1>@title<small></small></h1>
      </div>
      @modal
      @content
      <br><br>
    </div>
    <footer>
      <br><br><br>
  </footer>
  </div>
  <script src="@routes.Assets.at("vendor/javascripts/jquery.min.js")" type="text/javascript"></script>
  <script src="@routes.Assets.at("vendor/javascripts/bootstrap.js")" type="text/javascript"></script>
  <script src="@routes.Assets.at("/javascripts/main.js")" type="text/javascript"></script>
  <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
@if(modalOpened) { <div class="modal-backdrop fade in"></div> }
</body>
</html>

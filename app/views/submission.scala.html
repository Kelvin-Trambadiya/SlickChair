@(message: String,
  submissionForm: Form[SubmissionForm],
  topics: List[models.entities.Topic] = models.entities.Topics.all
)

@import helper.bootstrap3._
@import models.entities._

@legend(name: String) = {
  <div class="row">
    <div class="col-lg-10 col-offset-2">
      <h3>@name</h3>
    </div>
  </div>
}
@authors = @{(0 to 2)}

@main(message) {
  @helper.form(routes.Submitting.make, 'enctype -> "multipart/form-data", 'class -> "form-horizontal") {
    <fieldset>
      @legend("General Informations")
      @bootstrap3.inputText(
        submissionForm("paper.title"),
        '_label -> "Paper title")
      @bootstrap3.inputRadioGroup(
        submissionForm("paper.format.value"), 
        PaperType.values.toSeq.map(f => f.toString -> f.toString.replace("_", " ")), 
        '_label -> "Type")
      @bootstrap3.inputText(
        submissionForm("paper.keywords"),
        '_label -> "Keywords")
      @bootstrap3.textarea(
        submissionForm("paper.abstrct"),
        '_label -> "Abstract",
        'placeholder -> "Abstract",
        'rows -> 5)
      @bootstrap3.inputCheckboxGroup(
        submissionForm,
        "topics",
        topics.toSeq.map( t => (t.id, t.name) ),
        '_label -> "Topics")
    </fieldset><br>
    
      @bootstrap3.inputFile(
        submissionForm("data"),
        '_label -> "File")
    
      @legend("Authors")
      <div class="hidden">
        @bootstrap3.select(
          submissionForm("nauthors"),
          authors.map(i => ((i+1).toString, (i+1).toString)),
          '_label -> "Number of authors")
      </div>
      @authors.map { i =>
        <div class="hidden" id="author@i">
          <fieldset><legend>Author @(i+1)</legend>
            @bootstrap3.inputText(
              submissionForm(s"authors[$i].firstname"),
              '_label -> "First Name")
            @bootstrap3.inputText(
              submissionForm(s"authors[$i].lastname"),
              '_label -> "Last Name")
            @bootstrap3.inputText(
              submissionForm(s"authors[$i].organization"), 
              '_label -> "Organization")
            @bootstrap3.inputText(
              submissionForm(s"authors[$i].email"),
              '_label -> "Email")
          </fieldset><br>
        </div>
    }
    </fieldset>

    <br>
    <input type="submit">
    <script>
    window.onload = function () {
      document.getElementById('author0').className="visible";
      // document.body.onkeydown = function (e) {
      //   if (e.keyCode == 13 && e.ctrlKey) {
      //     document.getElementById('submit').click();
      //     return false; 
      //   }
      // }
    }
    // TODO: use Play function to convert data structure to Json.
    // var recipients = new Array();
    // var subjects = new Array();
    // var bodies = new Array();
    // document.getElementById("recipientSelect").onchange = function() {
    //   if(this.selectedIndex !== 0) {
    //     changeTextareaValueById("to", recipients[this.selectedIndex - 1]);
    //   }
    // }
    
    // document.getElementById("templateSelect").onchange = function() {
    //   if(this.selectedIndex !== 0) {
    //     changeTextareaValueById("subject", subjects[this.selectedIndex - 1]);
    //     changeTextareaValueById("body", bodies[this.selectedIndex - 1]);
    //   }
    // }
    
    // var changeTextareaValueById = function(id, text) {
    //   var element = document.getElementById(id);
    //   var event = document.createEvent("TextEvent");
    //   element.focus();
    //   element.select();
    //   event.initTextEvent("textInput", true, true, null, text);
    //   element.dispatchEvent(event);
    // }
    
    // document.getElementById("submit").addEventListener("click",
    //   function(e) {
    //     var confirmed = confirm("You are about to send "
    //       + document.getElementById("to").value.split(",").length
    //       + " emails.\nDo you want continue?")
    //     if (!confirmed) {
    //       e.preventDefault();
    //     }
    //   }, false);
    
    </script>
  }
}
